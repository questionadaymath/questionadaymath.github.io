
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Practice Hub</title>
    <link id="favicon" rel="icon" href="default-favicon.ico" type="image/x-icon">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f5f7fa;
            color: #1a202c;
            line-height: 1.6;
        }

        .header {
            background: #2c5aa0;
            color: white;
            padding: 24px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            font-size: 32px;
        }

        .logo-text h1 {
            font-size: 22px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .logo-text p {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 2px;
        }

        .student-info {
            text-align: right;
            font-size: 14px;
        }

        .container {
            max-width: 800px;
            margin: 40px auto;
            padding: 0 24px;
        }

        .assessment-card {
            background: white;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 32px;
            margin-bottom: 24px;
        }

        .assessment-header {
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 16px;
            margin-bottom: 24px;
        }

        .assessment-header h2 {
            font-size: 24px;
            color: #2c5aa0;
            margin-bottom: 8px;
        }

        .assessment-meta {
            font-size: 14px;
            color: #718096;
        }

        .question {
            margin-bottom: 32px;
            padding: 20px;
            background: #f8fafc;
            border-left: 4px solid #2c5aa0;
            border-radius: 4px;
        }

        .question-number {
            font-weight: 600;
            color: #2c5aa0;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .question-text {
            font-size: 16px;
            margin-bottom: 16px;
            color: #2d3748;
        }

        .math-expression {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 12px 16px;
            border-radius: 4px;
            border: 1px solid #cbd5e0;
            display: inline-block;
            margin: 8px 0;
            font-size: 15px;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #cbd5e0;
            border-radius: 4px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            transition: border-color 0.2s;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #2c5aa0;
        }

        .submit-btn {
            background: #2c5aa0;
            color: white;
            padding: 14px 32px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            transition: background 0.2s;
            width: 100%;
        }

        .submit-btn:hover {
            background: #234a87;
        }

        .footer {
            text-align: center;
            padding: 24px;
            color: #718096;
            font-size: 13px;
        }

        .instructions {
            background: #e6f2ff;
            border: 1px solid #bee3f8;
            border-radius: 4px;
            padding: 16px;
            margin-bottom: 24px;
            font-size: 14px;
            color: #2c5aa0;
        }

        .verification-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .verification-modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 32px;
            border-radius: 4px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        .modal-content h3 {
            color: #2c5aa0;
            margin-bottom: 16px;
            font-size: 20px;
        }

        .modal-content p {
            margin-bottom: 20px;
            color: #4a5568;
        }

        /* GameHub styles */
        .gamehub {
            display: none;
        }

        .gamehub.active {
            display: block;
        }

        body.game-mode {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0a0a0a 100%);
            color: #fff;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 48px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-logo {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: -0.5px;
            color: white;
        }

        .nav-links {
            display: flex;
            gap: 32px;
            align-items: center;
        }

        .nav-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: #fff;
        }

        .hero {
            text-align: center;
            padding: 80px 24px 60px;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h1 {
            font-size: 56px;
            font-weight: 700;
            margin-bottom: 20px;
            letter-spacing: -2px;
            line-height: 1.1;
            color: white;
        }

        .hero p {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 32px;
            line-height: 1.6;
        }

        .cta-button {
            display: inline-block;
            padding: 14px 32px;
            background: #fff;
            color: #000;
            text-decoration: none;
            font-weight: 600;
            font-size: 15px;
            border-radius: 4px;
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            cursor: pointer;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 255, 255, 0.2);
        }

        .games-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 48px 80px;
            background: transparent;
            height: 100vh;
        }

        .section-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 32px;
            letter-spacing: -1px;
            color: white;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 20px;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            padding: 32px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 100%);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .game-card:hover {
            transform: translateY(-4px);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        }

        .game-card:hover::before {
            opacity: 1;
        }

        .game-icon {
            font-size: 48px;
            margin-bottom: 16px;
            position: relative;
            z-index: 1;
        }

        .game-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 6px;
            position: relative;
            z-index: 1;
            color: white;
        }

        .game-desc {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            position: relative;
            z-index: 1;
        }

        /* URL Sharing Modal */
        .url-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .url-modal.active {
            display: flex;
        }

        .url-modal-content {
            background: #1a1a1a;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.8);
        }

        .url-modal-header {
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .url-modal-header h3 {
            color: white;
            font-size: 20px;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
        }

        .close-btn:hover {
            color: white;
        }

        .url-modal-body {
            padding: 24px;
        }

        .url-form {
            margin-bottom: 24px;
        }

        .url-form-group {
            margin-bottom: 16px;
        }

        .url-form-group label {
            display: block;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .url-form-group input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            color: white;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
        }

        .url-form-group input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.08);
        }

        .url-submit-btn {
            background: white;
            color: black;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s;
        }

        .url-submit-btn:hover {
            transform: translateY(-2px);
        }

        .url-submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .urls-list {
            margin-top: 24px;
        }

        .urls-list h4 {
            color: white;
            font-size: 16px;
            margin-bottom: 16px;
            font-weight: 600;
        }

        .url-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            padding: 16px;
            margin-bottom: 12px;
            transition: all 0.2s;
        }

        .url-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .url-item-title {
            color: white;
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .url-item-link {
            color: rgba(255, 255, 255, 0.6);
            font-size: 13px;
            text-decoration: none;
            word-break: break-all;
            display: block;
            margin-bottom: 8px;
        }

        .url-item-link:hover {
            color: white;
            text-decoration: underline;
        }

        .url-item-meta {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
        }

        .loading-spinner {
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.6);
        }

        .error-message {
            background: rgba(255, 59, 48, 0.1);
            border: 1px solid rgba(255, 59, 48, 0.3);
            color: #ff3b30;
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 16px;
            font-size: 14px;
        }

        .success-message {
            background: rgba(52, 199, 89, 0.1);
            border: 1px solid rgba(52, 199, 89, 0.3);
            color: #34c759;
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 16px;
            font-size: 14px;
        }

    </style>
</head>
<body>
    <!-- Math Assessment Page -->
    <div id="mathPage">
        <div class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">üìê</div>
                    <div class="logo-text">
                        <h1>Math Practice Hub</h1>
                    </div>
                </div>
                <div class="student-info">
                    <div><strong>Session:</strong> MP-2025-10293</div>
                    <div><strong>Date:</strong> <span id="session-date"></span></div>

                    <script>
                    const dateEl = document.getElementById("session-date");
                    const today = new Date();
                    const options = { year: 'numeric', month: 'long', day: 'numeric' };
                    dateEl.textContent = today.toLocaleDateString('en-US', options);
                    </script>

                </div>
            </div>
        </div>

        <div class="container">
            <div class="assessment-card">
                <div class="assessment-header">
                    <h2>Daily Math Question of the Day</h2>
                    <div class="assessment-meta">
                        <strong>Grade Level:</strong> 8th Grade | 
                        <strong>Topic:</strong> Algebra & Geometry | 
                        <strong>Daily Challenge</strong>
                    </div>
                </div>

                <div class="instructions">
                    <strong>Instructions:</strong> Solve today's math challenge and submit your answer. A new question is posted every day!
                </div>

                <form id="assessmentForm">
                    <!-- Question will be inserted here dynamically -->
                </form>
            </div>
        </div>

        <div class="footer">
            ¬© 2025 Math Practice Hub | Supporting Student Success in Mathematics
        </div>
    </div>

    <!-- Verification Modal -->
    <div id="verificationModal" class="verification-modal">
        <div class="modal-content">
            <h3>üîê Verification Required</h3>
            <p>To proceed, please enter the verification code:</p>
            <input type="text" id="verificationInput" placeholder="Enter verification code">
            <button onclick="verifyCode()" class="submit-btn" style="margin-top: 16px;">Verify</button>
        </div>
    </div>

    <!-- GameHub Page (hidden initially) -->
    <div id="gameHub" class="gamehub">
        <div class="games-container" id="games">
            <div class="games-grid" id="gamesGrid"></div>
        </div>
    </div>

    <!-- URL Sharing Modal -->
    <div id="urlModal" class="url-modal">
        <div class="url-modal-content">
            <div class="url-modal-header">
                <h3>üîó Share Unblocked Sites</h3>
                <button class="close-btn" onclick="closeUrlModal()">√ó</button>
            </div>
            <div class="url-modal-body">
                <div id="messageContainer"></div>
                
                <form id="urlForm" class="url-form">
                    <div class="url-form-group">
                        <label for="siteTitle">Site Name</label>
                        <input type="text" id="siteTitle" placeholder="e.g., Cool Math Games" required>
                    </div>
                    <div class="url-form-group">
                        <label for="siteUrl">URL (without https://)</label>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="color: rgba(255,255,255,0.6); font-size: 14px;">https://</span>
                            <input type="text" id="siteUrl" placeholder="example.com" required style="flex: 1;">
                        </div>
                    </div>
                    <div class="url-form-group">
                        <label for="siteDescription">Description (Optional)</label>
                        <input type="text" id="siteDescription" placeholder="Brief description of the site">
                    </div>
                    <button type="submit" class="url-submit-btn" id="urlSubmitBtn">Add Site</button>
                </form>

                <div class="urls-list">
                    <h4>Community Shared Sites</h4>
                    <div id="urlsList">
                        <div class="loading-spinner">Loading sites...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const SUPABASE_URL = 'https://ewfecnnxuqtzhlsuljqv.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV3ZmVjbm54dXF0emhsc3VsanF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE3OTAyMTksImV4cCI6MjA3NzM2NjIxOX0.QgDEhfh1kpZCxd7s7e4LnUlBk_ERv30DCF78-pSDlDM';

        
        let supabase = null;
        
        // Initialize Supabase
        try {
            supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        } catch (error) {
            console.error('Failed to initialize Supabase:', error);
        }

        // Question bank - rotates daily (one question per day)
        const questionBank = [
            { text: 'Solve for x:', expr: '3x + 7 = 22', placeholder: 'Enter your answer' },
            { text: 'What is the area of a circle with radius 5 cm? (Use œÄ ‚âà 3.14)', expr: null, placeholder: 'Enter your answer in cm¬≤' },
            { text: 'Simplify the expression:', expr: '2(4x - 3) + 5x', placeholder: 'Enter simplified form' },
            { text: 'What is the slope of the line passing through points (2, 3) and (6, 11)?', expr: null, placeholder: 'Enter the slope' },
            { text: 'A rectangular garden is 12 feet long and 8 feet wide. What is its perimeter?', expr: null, placeholder: 'Enter your answer in feet' },
            { text: 'Solve for y:', expr: '5y - 12 = 33', placeholder: 'Enter your answer' },
            { text: 'Find the volume of a rectangular prism with length 6 cm, width 4 cm, and height 3 cm.', expr: null, placeholder: 'Enter your answer in cm¬≥' },
            { text: 'Simplify the expression:', expr: '3(2x + 4) - 2x', placeholder: 'Enter simplified form' },
            { text: 'What is the y-intercept of the equation y = 3x - 7?', expr: null, placeholder: 'Enter the y-intercept' },
            { text: 'Solve for x:', expr: '2x + 15 = 39', placeholder: 'Enter your answer' },
            { text: 'What is the circumference of a circle with diameter 10 cm? (Use œÄ ‚âà 3.14)', expr: null, placeholder: 'Enter your answer in cm' },
            { text: 'Simplify the expression:', expr: '4(x - 2) + 3x + 8', placeholder: 'Enter simplified form' },
            { text: 'Find the slope between points (-1, 4) and (3, 12).', expr: null, placeholder: 'Enter the slope' },
            { text: 'A square has a perimeter of 48 inches. What is the length of one side?', expr: null, placeholder: 'Enter your answer in inches' },
            { text: 'Solve for n:', expr: '7n - 8 = 20', placeholder: 'Enter your answer' },
            { text: 'What is the area of a triangle with base 10 m and height 6 m?', expr: null, placeholder: 'Enter your answer in m¬≤' },
            { text: 'Simplify the expression:', expr: '5(2x + 1) - 3(x - 2)', placeholder: 'Enter simplified form' },
            { text: 'What is the distance between points (1, 2) and (4, 6)?', expr: null, placeholder: 'Enter the distance' },
            { text: 'If a rectangle has an area of 72 square meters and a width of 8 meters, what is its length?', expr: null, placeholder: 'Enter your answer in meters' },
            { text: 'Solve for x:', expr: '4x - 9 = 27', placeholder: 'Enter your answer' },
            { text: 'What is the surface area of a cube with side length 5 cm?', expr: null, placeholder: 'Enter your answer in cm¬≤' },
            { text: 'Simplify the expression:', expr: '6x + 2(3x - 5)', placeholder: 'Enter simplified form' },
            { text: 'What is the midpoint between coordinates (2, 8) and (10, 4)?', expr: null, placeholder: 'Enter as (x, y)' },
            { text: 'A circle has a radius of 7 cm. What is its area? (Use œÄ ‚âà 3.14)', expr: null, placeholder: 'Enter your answer in cm¬≤' },
            { text: 'Solve for a:', expr: '9a + 5 = 50', placeholder: 'Enter your answer' },
            { text: 'What is the volume of a cylinder with radius 4 cm and height 10 cm? (Use œÄ ‚âà 3.14)', expr: null, placeholder: 'Enter your answer in cm¬≥' },
            { text: 'Simplify the expression:', expr: '8x - 2(x + 3)', placeholder: 'Enter simplified form' },
            { text: 'Find the slope of the line y = -2x + 5.', expr: null, placeholder: 'Enter the slope' },
            { text: 'The angles in a triangle measure 45¬∞, 65¬∞, and x¬∞. What is x?', expr: null, placeholder: 'Enter your answer in degrees' },
            { text: 'Solve for x:', expr: '6x - 14 = 22', placeholder: 'Enter your answer' }
        ];
        const games = [
    {
        icon: 'G',
        title: 'Granny',
        desc: 'Horror',
        html: atob('PCFET0NUWVBFIGh0bWw+CjwhLS0gVWx0aW1hdGUgR2FtZSBTdGFzaCBmaWxlLS0+CjwhLS0gRm9yIHRoZSByZWd1bGFybHkgdXBkYXRpbmcgZG9jIGdvIHRvIGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvMV9GbUgzQmxTQlFJN0ZHZ0FRTDU5LVpQZThlQ3hzMzV3ZWw2SlV5VmFHOFEvIC0tPgo8aHRtbCBsYW5nPSJlbi11cyI+CjxoZWFkPgo8dGl0bGU+R3Jhbm55IE9yaWdpbmFsPC90aXRsZT4KPG1ldGEgY2hhcnNldD0idXRmLTgiPgo8bWV0YSBuYW1lPSJyb2JvdHMiIGNvbnRlbnQ9Im5vaW5kZXgsIG5vZm9sbG93Ij4KPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLTgiPgo8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9idWJibHMvZ3Jhbm55QDIxMmM1NDNhODViMjQzYzRhMGI5MjIxMWY1NTdlNzYwZDgzZDIyOTIvVGVtcGxhdGVEYXRhL3N0eWxlLmNzcyI+CjxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvYnViYmxzL2dyYW5ueUAyMTJjNTQzYTg1YjI0M2M0YTBiOTIyMTFmNTU3ZTc2MGQ4M2QyMjkyL3Nkay5qcyI+PFxcL3NjcmlwdD4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgp3aW5kb3cuU0RLX09QVElPTlMgPSB7CiAgICBnYW1lSWQ6ICJqcDExMm8zbzRoemdybmM3emFld2prcmZrMjgycHVsOCIsCiAgICBvbkV2ZW50OiBmdW5jdGlvbiAoYSkgewogICAgICAgIHN3aXRjaCAoYS5uYW1lKSB7CiAgICAgICAgICAgIGNhc2UgIlNES19HQU1FX1BBVVNFIjoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJPeXVuIGR1cmFrbGF0xLFsZMSxLCBzZXMga2FwYXTEsWzEsXlvci4uLiIpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBteUdhbWVJbnN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbXlHYW1lSW5zdGFuY2UpIHsKICAgICAgICAgICAgICAgICAgICBteUdhbWVJbnN0YW5jZS5TZW5kTWVzc2FnZSgnQXVkaW9NYW5hZ2VyJywgJ011dGVBdWRpbycpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgIlNES19HQU1FX1NUQVJUIjoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJSZWtsYW0gYml0dGksIG95dW4gZGV2YW0gZWRpeW9yLi4uIik7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG15R2FtZUluc3RhbmNlICE9PSAndW5kZWZpbmVkJyAmJiBteUdhbWVJbnN0YW5jZSkgewogICAgICAgICAgICAgICAgICAgIG15R2FtZUluc3RhbmNlLlNlbmRNZXNzYWdlKCdBdWRpb01hbmFnZXInLCAnVW5tdXRlQXVkaW8nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICJTREtfUkVBRFkiOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlNESyBoYXrEsXIuIik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9Cn07CihmdW5jdGlvbiAoYSwgYiwgYykgewogICAgdmFyIGQgPSBhLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpWzBdOwogICAgYS5nZXRFbGVtZW50QnlJZChjKSB8fCAoYSA9IGEuY3JlYXRlRWxlbWVudChiKSwgYS5pZCA9IGMsIGEuc3JjID0gImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC90ZXN0YW1hbGFtZS9zZWZAbWFpbi9zZWRrLmpzIiwgZC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLCBkKSk7Cn0pKGRvY3VtZW50LCAic2NyaXB0IiwgImdhbWVtb25ldGl6ZS1zZGsiKTsKPFxcL3NjcmlwdD4KPHN0eWxlPgpib2R5IHsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBvdmVyZmxvdzogaGlkZGVuOyBiYWNrZ3JvdW5kOiB1cmwoJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9ncnU2bm55L29oZEBtYWluL2JhY2tncm91bmQucG5nJykgbm8tcmVwZWF0IGNlbnRlciBjZW50ZXIgZml4ZWQ7IGJhY2tncm91bmQtc2l6ZTogY292ZXI7IH0KI3VuaXR5LWNvbnRhaW5lciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgbGVmdDogMDsgdG9wOiAwOyB9CiN1bml0eS1sb2FkaW5nLWJhciB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA1MCU7IGxlZnQ6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7IHdpZHRoOiA0MDBweDsgaGVpZ2h0OiAyMHB4OyBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNSk7IGJvcmRlcjogMnB4IHNvbGlkICNmZmZmZmY7IGJvcmRlci1yYWRpdXM6IDEwcHg7IGRpc3BsYXk6IGJsb2NrOyB9CiN1bml0eS1sb2dvIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IGNhbGMoNTAlIC0gMTAwcHgpOyBsZWZ0OiA1MCU7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsgd2lkdGg6IDIwMHB4OyBoZWlnaHQ6IGF1dG87IH0KI3VuaXR5LWxvZ28gaW1nIHsgbWF4LXdpZHRoOiAxMDAlOyBoZWlnaHQ6IGF1dG87IH0KI3VuaXR5LXByb2dyZXNzLWJhci1lbXB0eSB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQojdW5pdHktcHJvZ3Jlc3MtYmFyLWZ1bGwgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDAlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQ6ICM0Y2FmNTA7IGJvcmRlci1yYWRpdXM6IDhweDsgdHJhbnNpdGlvbjogd2lkdGggMC4zcyBlYXNlOyB9CiN1bml0eS13YXJuaW5nIHsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiA1MCU7IHRvcDogNSU7IHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUpOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTBweDsgZGlzcGxheTogbm9uZTsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNXB4OyB9Cjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CjxkaXYgaWQ9InVuaXR5LWNvbnRhaW5lciI+CjxjYW52YXMgaWQ9InVuaXR5LWNhbnZhcyIgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJSI+PC9jYW52YXM+CjxkaXYgaWQ9InVuaXR5LWxvYWRpbmctYmFyIj4KPGRpdiBpZD0idW5pdHktbG9nbyI+PC9kaXY+CjxkaXYgaWQ9InVuaXR5LXByb2dyZXNzLWJhci1lbXB0eSI+CjxkaXYgaWQ9InVuaXR5LXByb2dyZXNzLWJhci1mdWxsIj48L2Rpdj4KPC9kaXY+CjwvZGl2Pgo8ZGl2IGlkPSJ1bml0eS13YXJuaW5nIj48L2Rpdj4KPC9kaXY+CjxzY3JpcHQ+CmFzeW5jIGZ1bmN0aW9uIG1lcmdlVW5pdHlXZWJGaWxlcyhiYXNlVXJsLCBmaWxlUHJlZml4LCB0b3RhbFBhcnRzLCBleHRlbnNpb24pIHsKICAgIGNvbnN0IHBhcnRVcmxzID0gW107CiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0b3RhbFBhcnRzOyBpKyspIHsKICAgICAgICBwYXJ0VXJscy5wdXNoKFxcXGBcXFwke2Jhc2VVcmx9L1xcXCR7ZmlsZVByZWZpeH1fcGFydFxcXCR7aX0uXFxcJHtleHRlbnNpb259XFxcYCk7CiAgICB9CiAgICBjb25zdCBidWZmZXJzID0gW107CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsUGFydHM7IGkrKykgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocGFydFVybHNbaV0pOwogICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihcXFxgRmFpbGVkIHRvIGxvYWQgcGFydDogXFxcJHtwYXJ0VXJsc1tpXX1cXFxgKTsKICAgICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpOwogICAgICAgIGJ1ZmZlcnMucHVzaChidWZmZXIpOwogICAgICAgIGNvbnN0IHByb2dyZXNzID0gKChpICsgMSkgLyB0b3RhbFBhcnRzKSAqIDEwMDsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktcHJvZ3Jlc3MtYmFyLWZ1bGwiKS5zdHlsZS53aWR0aCA9IFxcXGBcXFwke3Byb2dyZXNzfSVcXFxgOwogICAgfQogICAgY29uc3QgdG90YWxMZW5ndGggPSBidWZmZXJzLnJlZHVjZSgoYWNjLCBidWZmZXIpID0+IGFjYyArIGJ1ZmZlci5ieXRlTGVuZ3RoLCAwKTsKICAgIGNvbnN0IGNvbWJpbmVkQnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGgpOwogICAgbGV0IG9mZnNldCA9IDA7CiAgICBidWZmZXJzLmZvckVhY2goKGJ1ZmZlcikgPT4gewogICAgICAgIGNvbWJpbmVkQnVmZmVyLnNldChuZXcgVWludDhBcnJheShidWZmZXIpLCBvZmZzZXQpOwogICAgICAgIG9mZnNldCArPSBidWZmZXIuYnl0ZUxlbmd0aDsKICAgIH0pOwogICAgcmV0dXJuIGNvbWJpbmVkQnVmZmVyOwp9CnZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktY29udGFpbmVyIik7CnZhciBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktY2FudmFzIik7CnZhciBsb2FkaW5nQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI3VuaXR5LWxvYWRpbmctYmFyIik7CnZhciBwcm9ncmVzc0JhckZ1bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktcHJvZ3Jlc3MtYmFyLWZ1bGwiKTsKdmFyIHdhcm5pbmdCYW5uZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjdW5pdHktd2FybmluZyIpOwpsZXQgbXlHYW1lSW5zdGFuY2UgPSBudWxsOwpsZXQgaXNBZFNob3duID0gZmFsc2U7CmZ1bmN0aW9uIHVuaXR5U2hvd0Jhbm5lcihtc2csIHR5cGUpIHsKICAgIGZ1bmN0aW9uIHVwZGF0ZUJhbm5lclZpc2liaWxpdHkoKSB7CiAgICAgICAgd2FybmluZ0Jhbm5lci5zdHlsZS5kaXNwbGF5ID0gd2FybmluZ0Jhbm5lci5jaGlsZHJlbi5sZW5ndGggPyAnYmxvY2snIDogJ25vbmUnOwogICAgfQogICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgZGl2LmlubmVySFRNTCA9IG1zZzsKICAgIHdhcm5pbmdCYW5uZXIuYXBwZW5kQ2hpbGQoZGl2KTsKICAgIGlmICh0eXBlID09ICdlcnJvcicpIGRpdi5zdHlsZSA9ICdiYWNrZ3JvdW5kOiByZWQ7IHBhZGRpbmc6IDEwcHg7JzsKICAgIGVsc2UgewogICAgICAgIGlmICh0eXBlID09ICd3YXJuaW5nJykgZGl2LnN0eWxlID0gJ2JhY2tncm91bmQ6IHllbGxvdzsgcGFkZGluZzogMTBweDsnOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHdhcm5pbmdCYW5uZXIucmVtb3ZlQ2hpbGQoZGl2KTsKICAgICAgICAgICAgdXBkYXRlQmFubmVyVmlzaWJpbGl0eSgpOwogICAgICAgIH0sIDUwMDApOwogICAgfQogICAgdXBkYXRlQmFubmVyVmlzaWJpbGl0eSgpOwp9CmZ1bmN0aW9uIHNob3dBZE9uQ2xpY2soKSB7CiAgICBpZiAoIWlzQWRTaG93biAmJiB0eXBlb2Ygc2RrICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygc2RrLnNob3dCYW5uZXIgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgc2RrLnNob3dCYW5uZXIoKTsKICAgICAgICBpc0FkU2hvd24gPSB0cnVlOwogICAgfQp9CnZhciBidWlsZFVybCA9ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ3J1Nm5ueS9vaGRAbWFpbi9CdWlsZCI7CnZhciBsb2FkZXJVcmwgPSBidWlsZFVybCArICIvR3Jhbm55LmxvYWRlci5qcyI7CmFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVHYW1lKCkgewogICAgdHJ5IHsKICAgICAgICBjb25zdCBkYXRhQnVmZmVyID0gYXdhaXQgbWVyZ2VVbml0eVdlYkZpbGVzKGJ1aWxkVXJsLCAiR3Jhbm55IiwgMiwgImRhdGEiKTsKICAgICAgICBjb25zdCB3YXNtQnVmZmVyID0gYXdhaXQgbWVyZ2VVbml0eVdlYkZpbGVzKGJ1aWxkVXJsLCAiR3Jhbm55IiwgMiwgIndhc20iKTsKICAgICAgICBjb25zdCBkYXRhQmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2RhdGFCdWZmZXJdLCB7IHR5cGU6ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iIH0pKTsKICAgICAgICBjb25zdCB3YXNtQmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3dhc21CdWZmZXJdLCB7IHR5cGU6ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iIH0pKTsKICAgICAgICB2YXIgY29uZmlnID0gewogICAgICAgICAgICBkYXRhVXJsOiBkYXRhQmxvYlVybCwKICAgICAgICAgICAgZnJhbWV3b3JrVXJsOiBidWlsZFVybCArICIvR3Jhbm55LmZyYW1ld29yay5qcyIsCiAgICAgICAgICAgIGNvZGVVcmw6IHdhc21CbG9iVXJsLAogICAgICAgICAgICBzdHJlYW1pbmdBc3NldHNVcmw6ICJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvZ3J1Nm5ueS9vaGRAbWFpbi9TdHJlYW1pbmdBc3NldHMiLAogICAgICAgICAgICBjb21wYW55TmFtZTogIkFuYXN0YXNpYSBLYXphbnRzZXZhIiwKICAgICAgICAgICAgcHJvZHVjdE5hbWU6ICJHcmFubnkiLAogICAgICAgICAgICBwcm9kdWN0VmVyc2lvbjogIjEuMCIsCiAgICAgICAgICAgIHNob3dCYW5uZXI6IHVuaXR5U2hvd0Jhbm5lciwKICAgICAgICB9OwogICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICAgICAgICBzY3JpcHQuc3JjID0gbG9hZGVyVXJsOwogICAgICAgIHNjcmlwdC5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgICAgIGNyZWF0ZVVuaXR5SW5zdGFuY2UoY2FudmFzLCBjb25maWcsIChwcm9ncmVzcykgPT4gewogICAgICAgICAgICAgICAgcHJvZ3Jlc3NCYXJGdWxsLnN0eWxlLndpZHRoID0gMTAwICogcHJvZ3Jlc3MgKyAiJSI7CiAgICAgICAgICAgIH0pLnRoZW4oKHVuaXR5SW5zdGFuY2UpID0+IHsKICAgICAgICAgICAgICAgIG15R2FtZUluc3RhbmNlID0gdW5pdHlJbnN0YW5jZTsKICAgICAgICAgICAgICAgIGxvYWRpbmdCYXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIHNob3dBZE9uQ2xpY2spOwogICAgICAgICAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzaG93QWRPbkNsaWNrKTsKICAgICAgICAgICAgfSkuY2F0Y2goKG1lc3NhZ2UpID0+IHsgYWxlcnQobWVzc2FnZSk7IH0pOwogICAgICAgIH07CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJHYW1lIGluaXRpYWxpemF0aW9uIGZhaWxlZDoiLCBlcnJvcik7CiAgICB9Cn0KaW5pdGlhbGl6ZUdhbWUoKTsKPFxcL3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+')
    },
    {
        icon: 'F',
        title: 'Football Bros',
        desc: 'Sports',
        html: atob(`PCFET0NUWVBFIGh0bWw+CjwhLS0gVWx0aW1hdGUgR2FtZSBTdGFzaCBmaWxlLS0+IAo8IS0tIEZvciB0aGUgcmVndWxhcmx5IHVwZGF0aW5nIGRvYyBnbyB0byBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFfRm1IM0JsU0JRSTdGR2dBUUw1OS1aUGU4ZUN4czM1d2VsNkpVeVZhRzhRLyAtLT4KPGh0bWwgbGFuZz0iZW4iPgo8aGVhZD4KICA8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+CiAgPGJhc2UgaHJlZj0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL2J1YmJscy9VR1MtQXNzZXRzQGQ3ZjgwNzlmNWQ5NzkxODJlMDRmMDViMWFkZTI0ZjJhNzU3MjUzYTMvZm9vdGJhbGwlMjBicm9zLyI+CiAgPG1ldGEgbmFtZT0iZGVzY3JpcHRpb24iIGNvbnRlbnQ9Ik9ubGluZSBtdWx0aXBsYXllciBmb290YmFsbCEgQm9uZSBjcnVzaGluZyBoaXRzLCBsb25nIGJvbWJzLCBhbmQgdG9ucyBtb3JlISIgLz4KICA8bWV0YSBpZD0idmlld3BvcnQiIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICA8bGluayByZWw9InNob3J0Y3V0IGljb24iIHR5cGU9ImltYWdlL3BuZyIgaHJlZj0iLi9mYXZpY29uLnBuZyI+CiAgPG1ldGEgbmFtZT0iS2V5d29yZHMiIGNvbnRlbnQ9IkZvb3RiYWxsLCBQbGF5LCBGcmVlLCBPbmxpbmUsIE11bHRpcGxheWVyLCBHYW1lcywgSU8sIFNwb3J0cywgU2Nyb2xsaW5nLCBGcmllbmRzIj4KICA8bWV0YSBuYW1lPSJhdXRob3IiIGNvbnRlbnQ9IkJsdWUgV2l6YXJkIERpZ2l0YWwiPgogIDxtZXRhIHByb3BlcnR5PSJvZzp0eXBlIiBjb250ZW50PSJ3ZWJzaXRlIiAvPgogIDxtZXRhIHByb3BlcnR5PSJvZzp0aXRsZSIgY29udGVudD0iRm9vdGJhbGwgQnJvcyIgLz4KICA8bWV0YSBwcm9wZXJ0eT0ib2c6ZGVzY3JpcHRpb24iIGNvbnRlbnQ9Ik9ubGluZSBtdWx0aXBsYXllciBmb290YmFsbCEgQm9uZSBjcnVzaGluZyBoaXRzLCBsb25nIGJvbWJzLCBhbmQgdG9ucyBtb3JlISIgLz4KICA8bGluayByZWw9Im1hbmlmZXN0IiBocmVmPSJtYW5pZmVzdC5qc29uIj4KICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSIuL0Zvb3RiYWxsQnJvcy5qcz90aD0yNzIiPjwvc2NyaXB0PgogIDxzdHlsZT4KICAgIGh0bWwsIGJvZHkgewogICAgICBtYXJnaW46IDA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgYmFja2dyb3VuZDogIzAwMDAwMDsKICAgICAgY29sb3I6IG9yYW5nZTsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMDB2aDsKICAgICAgd2lkdGg6IDEwMHZ3OwogICAgICBtYXJnaW46IDA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICB9CiAgICAjb3BlbmZsLWNvbnRlbnQgewogICAgICBiYWNrZ3JvdW5kOiAjMDAwMDAwOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgfQogIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgc3R5bGU9Im92ZXJmbG93OmhpZGRlbjsiPgogIDxub3NjcmlwdD5FbmFibGUgSmF2YVNjcmlwdCBicm8hPC9ub3NjcmlwdD4KICA8ZGl2IGlkPSJnYW1lMiIgc3R5bGU9IndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7ICI+CiAgICA8ZGl2IGlkPSJvcGVuZmwtY29udGVudCIgb25ibHVyPSJ3aW5kb3cuZm9jdXMoKTsiIHN0eWxlPSJ3aWR0aDogY2FsYygxMDAlKTsgZmxvYXQ6bGVmdDsiPgogICAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICAgICAgbGltZS5lbWJlZCgiRm9vdGJhbGxCcm9zIiwgIm9wZW5mbC1jb250ZW50IiwgMCwgMCwgewogICAgICAgICAgcGFyYW1ldGVyczoge30KICAgICAgICB9KTsKICAgICAgPFxcL3NjcmlwdD4KICAgIDwvZGl2PgogIDwvZGl2Pgo8L2JvZHk+CjwvaHRtbD4=`)
    },
    {
        icon: '1',
        title: '1v1 LOL',
        desc: 'Battle',
        html: atob('PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT4xdjEuTE9MPC90aXRsZT4KICAgIDxzdHlsZT4KICAgICAgICBib2R5LCBodG1sIHsKICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICBwYWRkaW5nOiAwOwogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDAwOwogICAgICAgIH0KICAgICAgICBpZnJhbWUgewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxpZnJhbWUgc3JjPSJodHRwczovLzF2MS5sb2wvIiBhbGxvdz0iZnVsbHNjcmVlbiI+PC9pZnJhbWU+CjwvYm9keT4KPC9odG1sPg==')
    },
    {
        icon: 'B',
        title: 'Baseball Bros',
        desc: 'Sports',
        html: atob('PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPgogIDxiYXNlIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9idWJibHMvVUdTLUFzc2V0c0BhZTY3MDZlNTIyNGM1NTU5NGM0OTFlZGZjN2Y1YWQ1NDFlMmVhMDJiL2Jhc2ViYWxsJTIwYnJvcy8iPgogIDx0aXRsZT5CQVNFQkFMTCBCUk9TISB8IE9mZmljaWFsIFNpdGU8L3RpdGxlPgogIDxtZXRhIG5hbWU9ImRlc2NyaXB0aW9uIiBjb250ZW50PSJPbmxpbmUgbXVsdGlwbGF5ZXIgYmFzZWJhbGwhIFN0cmlrZW91dHMsIHN0ZWFscywgYW5kIGdyYW5kIHNsYW1zISBIaXQgTnVrZXMhIiAvPgogIDxtZXRhIGlkPSJ2aWV3cG9ydCIgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAsIG1heGltdW0tc2NhbGU9MS4wLCB1c2VyLXNjYWxhYmxlPW5vIiAvPgogIDxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgdHlwZT0iaW1hZ2UvcG5nIiBocmVmPSIuL2Zhdmljb24ucG5nIj4KICA8bWV0YSBuYW1lPSJLZXl3b3JkcyIgY29udGVudD0iQmFzZWJhbGwsIFBsYXksIEZyZWUsIE9ubGluZSwgTXVsdGlwbGF5ZXIsIEdhbWVzLCBJTywgU3BvcnRzLCBTY3JvbGxpbmcsIEZyaWVuZHMiPgogIDxtZXRhIG5hbWU9ImF1dGhvciIgY29udGVudD0iQmx1ZSBXaXphcmQgRGlnaXRhbCI+CiAgPG1ldGEgcHJvcGVydHk9Im9nOnR5cGUiIGNvbnRlbnQ9IndlYnNpdGUiIC8+CiAgPG1ldGEgcHJvcGVydHk9Im9nOnRpdGxlIiBjb250ZW50PSJCYXNlYmFsbCBCcm9zIiAvPgogIDxtZXRhIHByb3BlcnR5PSJvZzpkZXNjcmlwdGlvbiIgY29udGVudD0iT25saW5lIG11bHRpcGxheWVyIGJhc2ViYWxsISBIaXQgaG9tZSBydW5zLCBzdGVhbCBiYXNlcywgc3RyaWtlIG91dCB0aGUgc2lkZSEiIC8+CiAgPGxpbmsgcmVsPSJtYW5pZmVzdCIgaHJlZj0ibWFuaWZlc3QuanNvbiI+CiAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iLi9CYXNlYmFsbEJyb3MuanM/dGg9NzYiPjwvc2NyaXB0PgogIDxzdHlsZT4KICAgIGh0bWwsIGJvZHkgewogICAgICBtYXJnaW46IDA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICAgIGhlaWdodDogMTAwJTsKICAgICAgYmFja2dyb3VuZDogIzAwMDAwMDsKICAgICAgY29sb3I6IG9yYW5nZTsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMDB2aDsKICAgICAgd2lkdGg6IDEwMHZ3OwogICAgICBtYXJnaW46IDA7CiAgICAgIHBhZGRpbmc6IDA7CiAgICB9CiAgICAjb3BlbmZsLWNvbnRlbnQgewogICAgICBiYWNrZ3JvdW5kOiAjMDAwMDAwOwogICAgICB3aWR0aDogMTAwJTsKICAgICAgaGVpZ2h0OiAxMDAlOwogICAgfQogIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgc3R5bGU9Im92ZXJmbG93OmhpZGRlbjsiPgogIDxub3NjcmlwdD5FbmFibGUgSmF2YVNjcmlwdCBicm8hPC9ub3NjcmlwdD4KICA8ZGl2IGlkPSJnYW1lMiIgc3R5bGU9IndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7ICI+CiAgICA8ZGl2IGlkPSJvcGVuZmwtY29udGVudCIgb25ibHVyPSJ3aW5kb3cuZm9jdXMoKTsgd2luZG93LnNjcm9sbFRvKDAsIDApOyIgc3R5bGU9IndpZHRoOiBjYWxjKDEwMCUpOyBmbG9hdDpsZWZ0OyI+CiAgICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KICAgICAgICBsaW1lLmVtYmVkKCJCYXNlYmFsbEJyb3MiLCAib3BlbmZsLWNvbnRlbnQiLCAwLCAwLCB7CiAgICAgICAgICBwYXJhbWV0ZXJzOiB7fQogICAgICAgIH0pOwogICAgICA8XFwvc2NyaXB0PgogICAgPC9kaXY+CiAgPC9kaXY+CjwvYm9keT4KPC9odG1sPg==')
    },
    {
        icon: 'G',
        title: 'Getaway Shootout',
        desc: 'Action',
        html: atob('PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+R2V0YXdheSBTaG9vdG91dDwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgYmFja2dyb3VuZDogcmdiKDg4LCAxMDgsIDEyOCk7IH0KICAgICAgICAud2ViZ2wtY29udGVudCB7IHdpZHRoOiAxMDB2dzsgaGVpZ2h0OiAxMDB2aDsgcGFkZGluZzogMDsgbWFyZ2luOiAwOyB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9sZWUyc21hbi9ldmVyeWRheUBkNDVkNjAxZDJjNGQ2MGFkZjgwOWEwYjY3N2MwMGI3ZDEyYWJhN2U5Lzk2L1RlbXBsYXRlRGF0YS9Vbml0eVByb2dyZXNzLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvbG9yZHNvZmRhbmsvR2V0YXdheVNob290b3V0QDllOTk5NjRjNDM2MzgzNDY2ODBmY2U0NWQzYjI5NjQwOGRhNjExODEvQnVpbGQvVW5pdHlMb2FkZXIuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdD4KICAgICAgdmFyIGdhbWVJbnN0YW5jZSA9IFVuaXR5TG9hZGVyLmluc3RhbnRpYXRlKCJnYW1lQ29udGFpbmVyIiwgImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9sb3Jkc29mZGFuay9HZXRhd2F5U2hvb3RvdXRAOWU5OTk2NGM0MzYzODM0NjY4MGZjZTQ1ZDNiMjk2NDA4ZGE2MTE4MS9CdWlsZC9HZXRhd2F5U2hvb3RvdXRUd29QbGF5ZXJHYW1lc09yZy5qc29uIiwge29uUHJvZ3Jlc3M6IFVuaXR5UHJvZ3Jlc3MsTW9kdWxlOntvblJ1bnRpbWVJbml0aWFsaXplZDogZnVuY3Rpb24oKSB7VW5pdHlQcm9ncmVzcyhnYW1lSW5zdGFuY2UsICJjb21wbGV0ZSIpfX19KTsKICAgIDxcXC9zY3JpcHQ+CiAgICA8ZGl2IGNsYXNzPSJ3ZWJnbC1jb250ZW50Ij4KICAgICAgICA8ZGl2IGlkPSJnYW1lQ29udGFpbmVyIiBzdHlsZT0id2lkdGg6IDEwMHZ3OyBoZWlnaHQ6IDEwMHZoOyBwYWRkaW5nOiAwcHg7IG1hcmdpbjogMHB4OyBib3JkZXI6IDBweDsgcG9zaXRpb246IHJlbGF0aXZlOyBiYWNrZ3JvdW5kOiByZ2IoODgsIDEwOCwgMTI4KTsiPgogICAgICAgICAgICA8Y2FudmFzIGlkPSIjY2FudmFzIiBzdHlsZT0iY3Vyc29yOiBkZWZhdWx0OyI+PC9jYW52YXM+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KPC9ib2R5Pgo8L2h0bWw+')
    },
    {
        icon: 'R',
        title: 'Retro Bowl',
        desc: 'Sports',
          html: atob(`PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8YmFzZSBocmVmPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvc2VsZW5pdGUtY2Mvc2VsZW5pdGUtb2xkQDljNzQzMTg4ODg4YWYwOTg2YzhjN2IyOTNkYmFjOGY5ZTQyMWE0ZWUvcmV0cm9ib3dsLyI+CiAgICA8bGluayByZWw9Imljb24iIHR5cGU9ImltYWdlL3gtaWNvbiIgaHJlZj0icmV0cm9ib3dsLmljbyIgLz4KICAgIDxtZXRhIGh0dHAtZXF1aXY9IlgtVUEtQ29tcGF0aWJsZSIgY29udGVudD0iSUU9ZWRnZSIgLz4KICAgIDxtZXRhIGh0dHAtZXF1aXY9InByYWdtYSIgY29udGVudD0ibm8tY2FjaGUiIC8+CiAgICA8bWV0YSBuYW1lPSJhcHBsZS1tb2JpbGUtd2ViLWFwcC1jYXBhYmxlIiBjb250ZW50PSJ5ZXMiIC8+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCwgbWF4aW11bS1zY2FsZT0xLjAsIHVzZXItc2NhbGFibGU9MCIgLz4KICAgIDxtZXRhIG5hbWU9ImFwcGxlLW1vYmlsZS13ZWItYXBwLXN0YXR1cy1iYXItc3R5bGUiIGNvbnRlbnQ9ImJsYWNrLXRyYW5zbHVjZW50IiAvPgogICAgPG1ldGEgY2hhcnNldD0idXRmLTgiIC8+CiAgICA8dGl0bGU+UmV0cm8gQm93bDwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgIGJvZHkgewogICAgICAgIGJhY2tncm91bmQ6ICMwMDA7CiAgICAgICAgY29sb3I6ICNjY2NjY2M7CiAgICAgICAgbWFyZ2luOiAwcHg7CiAgICAgICAgcGFkZGluZzogMHB4OwogICAgICAgIGJvcmRlcjogMHB4OwogICAgICB9CiAgICAgIGNhbnZhcyB7CiAgICAgICAgaW1hZ2UtcmVuZGVyaW5nOiBvcHRpbWl6ZVNwZWVkOwogICAgICAgIC13ZWJraXQtaW50ZXJwb2xhdGlvbi1tb2RlOiBuZWFyZXN0LW5laWdoYm9yOwogICAgICAgIC1tcy10b3VjaC1hY3Rpb246IG5vbmU7CiAgICAgICAgbWFyZ2luOiAwcHg7CiAgICAgICAgcGFkZGluZzogMHB4OwogICAgICAgIGJvcmRlcjogMHB4OwogICAgICB9CiAgICAgIDotd2Via2l0LWZ1bGwtc2NyZWVuICNjYW52YXMgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgfQogICAgICBkaXYuZ200aHRtbDVfZGl2X2NsYXNzIHsKICAgICAgICBtYXJnaW46IDBweDsKICAgICAgICBwYWRkaW5nOiAwcHg7CiAgICAgICAgYm9yZGVyOiAwcHg7CiAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGNsYXNzPSJnbTRodG1sNV9kaXZfY2xhc3MiIGlkPSJnbTRodG1sNV9kaXZfaWQiPgogICAgICA8Y2FudmFzIGlkPSJjYW52YXMiIHdpZHRoPSI5NjAiIGhlaWdodD0iNTQwIj4KICAgICAgICA8cD5Zb3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IEhUTUw1IGNhbnZhcy48L3A+CiAgICAgIDwvY2FudmFzPgogICAgPC9kaXY+CiAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSJodG1sNWdhbWUvUmV0cm9Cb3dsLmpzP1dBRUFDPTE2MzMxNTU0NDUiPjwvc2NyaXB0PgogICAgPHNjcmlwdD4KICAgICAgd2luZG93Lm9ubG9hZCA9IEdhbWVNYWtlcl9Jbml0OwogICAgPFxcL3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+`)

    },
    {
        icon: 'üîó',
        title: 'Share Sites',
        desc: 'Add URLs',
        action: 'openUrlModal'
    }
];
        // Get today's question based on day of year
        function getDayOfYear() {
            const now = new Date();
            const start = new Date(now.getFullYear(), 0, 0);
            const diff = now - start;
            const oneDay = 1000 * 60 * 60 * 24;
            return Math.floor(diff / oneDay);
        }

        const dayIndex = getDayOfYear() % questionBank.length;
        const todaysQuestion = questionBank[dayIndex];

        // Check if already unlocked
        const isUnlocked = localStorage.getItem('gameHubUnlocked') === 'true';

        if (isUnlocked) {
            // Already unlocked, go straight to game hub
            showGameHub();
        } else {
            // Show math page - populate the question
            const form = document.getElementById('assessmentForm');

            const questionDiv = document.createElement('div');
            questionDiv.className = 'question';
            questionDiv.innerHTML = `
                <div class="question-number">Question of the Day</div>
                <div class="question-text">${todaysQuestion.text}</div>
                ${todaysQuestion.expr ? `<div class="math-expression">${todaysQuestion.expr}</div>` : ''}
                <input type="text" id="q1" name="q1" placeholder="${todaysQuestion.placeholder}" required>
            `;
            form.appendChild(questionDiv);

            const submitBtn = document.createElement('button');
            submitBtn.type = 'submit';
            submitBtn.className = 'submit-btn';
            submitBtn.textContent = 'Submit Answer';
            form.appendChild(submitBtn);
        }

        function showGameHub() {
            // Hide math page and modal
            document.getElementById('mathPage').style.display = 'none';
            document.getElementById('verificationModal').classList.remove('active');
            
            // Show game hub
            document.getElementById('gameHub').classList.add('active');
            document.body.classList.add('game-mode');
            document.title = 'Google Classroom';
            
            // Set Google Classroom favicon
            const link = document.querySelector("link[rel*='icon']") || document.createElement('link');
            link.type = 'image/x-icon';
            link.rel = 'shortcut icon';
            link.href = 'https://ssl.gstatic.com/classroom/favicon.png';
            document.getElementsByTagName('head')[0].appendChild(link);
            
            // Load games
            const grid = document.getElementById('gamesGrid');
            grid.innerHTML = '';
            games.forEach(game => {
                const card = document.createElement('div');
                card.className = 'game-card';
                card.innerHTML = `
                    <div class="game-icon">${game.icon}</div>
                    <div class="game-title">${game.title}</div>
                    <div class="game-desc">${game.desc}</div>
                `;
                card.onclick = () => {
                    if (game.action === 'openUrlModal') {
                        openUrlModal();
                    } else if (game.html) {
                        const win = window.open('about:blank');
                        win.document.write(game.html);
                        win.document.close();
                    }
                };
                grid.appendChild(card);
            });
        }

        // URL Modal Functions
        function openUrlModal() {
            document.getElementById('urlModal').classList.add('active');
            loadUrls();
        }

        function closeUrlModal() {
            document.getElementById('urlModal').classList.remove('active');
        }

        function showMessage(message, type = 'success') {
            const container = document.getElementById('messageContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = type === 'success' ? 'success-message' : 'error-message';
            messageDiv.textContent = message;
            container.innerHTML = '';
            container.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 5000);
        }

        async function loadUrls() {
            const urlsList = document.getElementById('urlsList');
            urlsList.innerHTML = '<div class="loading-spinner">Loading sites...</div>';
            
            if (!supabase) {
                urlsList.innerHTML = '<div class="error-message">Database connection not configured</div>';
                return;
            }

            try {
                const { data, error } = await supabase
                    .from('shared_urls')
                    .select('*')
                    .order('created_at', { ascending: false })
                    .limit(50);

                if (error) throw error;

                if (!data || data.length === 0) {
                    urlsList.innerHTML = '<p style="color: rgba(255,255,255,0.5); text-align: center; padding: 20px;">No sites shared yet. Be the first!</p>';
                    return;
                }

                urlsList.innerHTML = '';
                data.forEach(url => {
                    const item = document.createElement('div');
                    item.className = 'url-item';
                    
                    const date = new Date(url.created_at).toLocaleDateString();
                    
                    item.innerHTML = `
                        <div class="url-item-title">${escapeHtml(url.title)}</div>
                        <a href="${escapeHtml(url.url)}" target="_blank" class="url-item-link">${escapeHtml(url.url)}</a>
                        ${url.description ? `<div style="color: rgba(255,255,255,0.6); font-size: 13px; margin-bottom: 8px;">${escapeHtml(url.description)}</div>` : ''}
                        <div class="url-item-meta">Shared on ${date}</div>
                    `;
                    
                    urlsList.appendChild(item);
                });
            } catch (error) {
                console.error('Error loading URLs:', error);
                urlsList.innerHTML = '<div class="error-message">Failed to load sites. Please try again.</div>';
            }
        }

        // Submit URL Form
        document.getElementById('urlForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!supabase) {
                showMessage('Database connection not configured', 'error');
                return;
            }

            const submitBtn = document.getElementById('urlSubmitBtn');
            const title = document.getElementById('siteTitle').value.trim();
            let url = document.getElementById('siteUrl').value.trim().toLowerCase();
            const description = document.getElementById('siteDescription').value.trim();

            // Basic validation
            if (!title || !url) {
                showMessage('Please fill in all required fields', 'error');
                return;
            }

            // Remove any protocol if user added it
            url = url.replace(/^(https?:\/\/)?(www\.)?/, '');
            
            // Add https:// prefix for full URL
            const fullUrl = 'https://' + url;

            // Validate URL format
            if (!isValidUrl(url)) {
                showMessage('Please enter a valid website URL (e.g., example.com)', 'error');
                return;
            }

            // Check against blocked content
            if (isBlockedUrl(url)) {
                showMessage('This site cannot be added. Please choose an educational or appropriate website.', 'error');
                return;
            }

            try {
                submitBtn.disabled = true;
                submitBtn.textContent = 'Adding...';

                const { data, error } = await supabase
                    .from('shared_urls')
                    .insert([
                        {
                            title: title,
                            url: fullUrl,
                            description: description || null
                        }
                    ])
                    .select();

                if (error) throw error;

                showMessage('Site added successfully!', 'success');
                
                // Reset form
                document.getElementById('urlForm').reset();
                
                // Reload URLs
                loadUrls();
                
            } catch (error) {
                console.error('Error adding URL:', error);
                showMessage('Failed to add site. Please try again.', 'error');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Add Site';
            }
        });

        // Validate URL format
        function isValidUrl(url) {
            // Basic URL pattern check
            const urlPattern = /^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,}(:[0-9]{1,5})?(\/.*)?$/i;
            return urlPattern.test(url);
        }

        // Check if URL contains blocked content
        function isBlockedUrl(url) {
            const blockedKeywords = [
                // Adult content
                'porn', 'xxx', 'sex', 'adult', 'nude', 'nsfw', 'hentai', 'xvideos', 
                'pornhub', 'xhamster', 'redtube', 'youporn', 'xnxx', 'brazzers',
                'onlyfans', 'chaturbate', 'stripchat', 'cam4', 'livejasmin',
                
                // Gambling
                'casino', 'poker', 'gambling', 'betting', 'slots', 'jackpot',
                
                // Drugs/substances
                'weed', 'cannabis', 'marijuana', 'drug', 'cocaine', 'heroin',
                'meth', 'ecstasy', 'psychedelic',
                
                // Violence/weapons
                'gore', 'bestgore', 'liveleak', 'rotten', 'shock',
                
                // Hate/extremism
                'nazi', 'kkk', 'whitesupremacy', 'terrorism',
                
                // Piracy
                'torrent', 'piratebay', 'kickass', '1337x', 'rarbg',
                
                // Dark web
                'onion', 'tor', 'darkweb', 'deepweb',
                
                // Cheating/hacking
                'hack', 'cheat', 'crack', 'keygen', 'warez',
                
                
                // Dating
                'tinder', 'bumble', 'dating', 'match.com', 'okcupid',
            
            ];

            const blockedDomains = [
                'pornhub.com', 'xvideos.com', 'xnxx.com', 'xhamster.com',
                'redtube.com', 'youporn.com', 'tube8.com', 'spankbang.com',
                'eporner.com', 'tnaflix.com', 'drtuber.com', 'keezmovies.com',
                'onlyfans.com', 'fansly.com', 'manyvids.com',
                'chaturbate.com', 'stripchat.com', 'cam4.com', 'myfreecams.com',
                'reddit.com/r/nsfw', 'reddit.com/r/porn',
                'thepiratebay.org', 'kickasstorrents.to', '1337x.to',
                'rarbg.to', 'yts.mx', 'eztv.re',
                'bestgore.com', 'liveleak.com', 'kaotic.com',
                '4chan.org', '8chan.org', '8kun.top'
            ];

            const lowerUrl = url.toLowerCase();

            // Check for blocked keywords
            for (const keyword of blockedKeywords) {
                if (lowerUrl.includes(keyword)) {
                    return true;
                }
            }

            // Check for exact domain matches
            for (const domain of blockedDomains) {
                if (lowerUrl === domain || lowerUrl.startsWith(domain + '/')) {
                    return true;
                }
            }

            return false;
        }

        // Helper function to escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Kill switch - press Ctrl + Shift + X to exit
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'x') {
                localStorage.removeItem('gameHubUnlocked');
                location.reload();
            }
        });

        // Check if any answer contains "curiosity"
        document.getElementById('assessmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const answer = document.getElementById('q1').value.toLowerCase();

            if (answer.includes('curiosity')) {
                document.getElementById('verificationModal').classList.add('active');
            } else {
                alert('Answer submitted. Great work on today\'s challenge!');
            }
        });

        function verifyCode() {
            const code = document.getElementById('verificationInput').value;
            
            if (code === 'ifykyk') {
                // Save unlock status
                localStorage.setItem('gameHubUnlocked', 'true');
                
                // Show game hub
                showGameHub();
            } else {
                alert('Incorrect verification code. Please try again.');
                document.getElementById('verificationInput').value = '';
            }
        }

        // Allow Enter key on verification input
        document.getElementById('verificationInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                verifyCode();
            }
        });

        // Close modal when clicking outside
        document.getElementById('urlModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeUrlModal();
            }
        });
    </script>
</body>
</html>
